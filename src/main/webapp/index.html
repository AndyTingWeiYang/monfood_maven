<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <title>MonFood</title>
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
      <link rel="stylesheet" href="css/indexHeader.css">
      <link rel="stylesheet" href="css/footer.css">
      <link rel="stylesheet" href="css/layout.css">
      <link rel="stylesheet" href="css/index.css">

      <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto&display=swap');

        div.adminArea{
          border-radius: 5px;
          text-align: center;
          cursor: pointer;;
        }
        .offcanvas-body{
          display: flex!important;
          flex-direction: column;
          justify-content: flex-start;
          align-items: flex-start;
          align-content: flex-start;
        }

      </style>
  </head>
  
  <body>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
      <!-- offcanvas -->
      <section style="background-image: url(/index03.jpg)">

      
      <div style="background-image: url(images/pexels-photo-5490358.jpeg)" class="offcanvas offcanvas-start" id="sidebar" tabindex="-1" aria-labelledby="sidebar-label">
          <div class="offcanvas-header">
              <h5 class="offcanvas-title" id="sidebar-label"></h5>
              <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
          </div>
      
          <div class="offcanvas-body d-flex">

              <a href="userLogin.html" class="btn btn-primary black" style="background-color: #41464b40; margin-bottom: 20px;">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-fill" viewBox="0 0 16 16">
                  <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
                  </svg><span class="login">登入</span>
              </a>

              <a href="resLogin.html" class="btn btn-primary black " style="background-color: #41464b40; margin-bottom: 20px;" >
                <span class="login">新增您的餐廳</span>
              </a>

              <a href="delLogin.html" class="btn btn-primary black" style="background-color: #41464b40; margin-bottom: 20px;">
                <span class="login">註冊成為外送夥伴</span>
              </a>
          </div>
      </div>
    </section>
    <!-- offcanvas -->
        
      <!-- navbar -->
      <header>
        <nav class="navbar navbar-expand-lg" style="background-color: #FF7F3F">
          <div class="container">
            <button class="btn btn-primary" type="button" data-bs-toggle="offcanvas" data-bs-target="#sidebar" aria-controls="sidebar">
              <span class="navbar-toggler-icon"></span>
            </button>
            <a class="navbar-brand d-inline-flex" href="index.html">
              <span class="logo">Mon</span>
              <span class="logo2">Food</span>
            </a>
            <a href="userLogin.html" class="btn btn-primary black" id="login">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-fill" viewBox="0 0 16 16">
              <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
              </svg><span id="logStatus" class="login">登入</span>
            </a>
          </div>
        </nav>
      </header>
      <!-- navbar -->
      
    <main>
      <!-- section -->
      <section>
        <div style="overflow: hidden; width: 100%; height: 100%;" style="position: absolute;">
        	<div class="container" id="page" style="position: absolute;left:61px; z-index: 1 ">
        		<div class="row justify-content-center">
        			<div class="col-6 input-group input-group-sm w-50 align-items-center; margin-left: 80px">
        				<input type="text" id="address" class="form-control address" placeholder="輸入外送地址" aria-label="Recipient's username" aria-describedby="button-addon2" style="margin: 50% 0 0 0; opacity: 0.8; height: 40px;">
        				<button class="btn btn-primary address_search" type="submit" id="button-addon2" style="margin: 50% 0 0 0; opacity: 0.8; height: 40px;">搜尋</button>
        			</div>
        		</div>
        	</div>
        	<img src="images/313338.jpg" alt="" width="100%">
         </div>
        </section>
   
    




      <!-- 三種腳色的註冊入口 -->
      <div class="row row-cols-1 row-cols-md-3 g-4 " style="margin: 0px 15px 0px 15px;">
        <div class="col">
          <div class="card h-100">
            <a href="userLogin.html" style="text-decoration: none">
              <img src="images/userlogin.jpg" class="card-img-top" alt="userLogin" >
              <div class="card-footer">
                <small class="text-muted">註冊用戶開始點餐</small>
            </div>
            </a>
          </div>
        </div>

        <div class="col">
          <div class="card h-100">
            <a href="resLogin.html" style="text-decoration: none">
              <img src="images/resLogin.jpeg" class="card-img-top" alt="...">
              <div class="card-footer">
                <small class="text-muted"> 新增您的餐廳</small>
              </div>
            </a>
          </div>
        </div>

        <div class="col">
          <div class="card h-100">
            <a href="delLogin.html" style="text-decoration: none">
              <img src="images/delLogin.jpeg" class="card-img-top" alt="...">
              <div class="card-footer">
                <small class="text-muted">註冊成為外送夥伴</small>
              </div>
            </a>
          </div>
        </div>
      
      </div>
      <br>
      <div id="map"></div>


            
      <!-- section -->
      <div style="margin:  0 0 0 25px;">提供 MonFood 優食的地區</div>
      <br>
      <div class="container">
        <div class="row row-cols-2 row-cols-lg-6 g-2 g-lg-3">
          <div class="col">
            <div class="p-3 border bg-light adminArea" name="100">中正區</div>
          </div>
          <div class="col">
            <div class="p-3 border bg-light adminArea" name="103">大同區</div>
          </div>
          <div class="col">
            <div class="p-3 border bg-light adminArea" name="104">中山區</div>
          </div>
          <div class="col">
            <div class="p-3 border bg-light adminArea" name="105">松山區</div>
          </div>
          <div class="col">
            <div class="p-3 border bg-light adminArea" name="106">大安區</div>
          </div>
          <div class="col">
            <div class="p-3 border bg-light adminArea" name="108">萬華區</div>
          </div>
          <div class="col">
            <div class="p-3 border bg-light adminArea" name="111">士林區</div>
          </div>
          <div class="col">
            <div class="p-3 border bg-light adminArea" name="112">北投區</div>
          </div>
          <div class="col">
            <div class="p-3 border bg-light adminArea" name="114">內湖區</div>
          </div>
          <div class="col">
            <div class="p-3 border bg-light adminArea" name="115">南港區</div>
          </div>
          <div class="col">
            <div class="p-3 border bg-light adminArea" name="116">文山區</div>
          </div>
          <div class="col">
            <div class="p-3 border bg-light adminArea" name="110">信義區</div>
          </div>
        </div>
      </div>
      <br>
      <br>
      <br>
      <br>

      <iframe src="https://www.google.com/maps/embed?pb=!1m10!1m8!1m3!1d1872701.4985836851!2d120.6402133!3d23.546162!3m2!1i1024!2i768!4f13.1!5e0!3m2!1szh-TW!2stw!4v1656284981129!5m2!1szh-TW!2stw" width="100%" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
  

    </main>
      
    <!-- Footer -->
    <div style="background-color: #FF7F3F">
      <div class="container pb-0 mb-0 text-light " style="background-color: #FF7F3F">
        <footer>
          <div class="row justify-content-center mb-0 pt-0 pb-0 row-2 px-3">
            <div class="col-12">

              <div class="row justify-content-between ">
                <div class="col-6 align-self-center">
                  <a class="navbar-brand d-inline-flex" href="index.html">
                    <span class="logo">Mon</span>
                    <span class="logo2">Food</span>
                  </a>
                </div>

                <div class="col-6 col-lg-2 col-md-3 mt-sm-0 mt-0" style="font-size: 13px">
                  <ul class="list-unstyled justify-content-center">
                    <li class="mt-3 mb-1">
                      <a href="resLogin.html" class="transparent">新增您的餐廳</a>
                    </li>
                    <li class="mb-1 transparent">
                      <a href="delLogin.html">註冊成為外送夥伴</a>
                    </li>
                    <li class="mb-1 transparent">
                      <a href="index.html">關於MonFood</a>
                    </li>
                  </ul>
                </div>
              </div>  

            </div>
          </div>
        </footer>
      </div>
    </div>
    <!-- Footer -->
                  
    
  </body>
  <script src="js/logout.js"></script>
  <script src="assets/js/jQuery-3.6.0.js"></script>
  <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD6AB8jcKkzMnwsPPZhMQBRgKXF_lXaX84&libraries=places"></script>
  
  <script>
    window.addEventListener('load', function(){
      var mylatlng = { lat: 25.0393131, lng: 121.3871121 };
      var res = {lat: 25.0444475, lng:121.5212073};

      var directionsService = new google.maps.DirectionsService();
      var directionsDisplay = new google.maps.DirectionsRenderer();

      // // 初始化地圖
      map = new google.maps.Map(document.getElementById('map'), {
        zoom: 16,
        center: res
      });
  
      // 放置路線圖層
      directionsDisplay.setMap(map);
  
      // 路線相關設定
      var request = {
        origin: res,
        destination: mylatlng,
        travelMode: 'DRIVING'
      };

    
      // 繪製路線
      // directionsService.route(request, function (result, status) {
      //   if (status == 'OK') {
      //     // 回傳路線上每個步驟的細節
      //     directionsDisplay.setDirections(result);
      //     // 路程時間
      //     var duration = parseInt(result.routes[0].legs[0].duration.value);
      //     // 目前時間
      //     var today = new Date();
      //     // 轉為毫秒數
      //     var t_s = today.getTime();
          
      //     var time = new Date();
      //     time.setTime(t_s + duration*1000 + 15*60*1000); // 將目前時間與路程時間加總 (加上預設餐點時間15分鐘)
      //     var arrival = time.getHours() + ":" + time.getMinutes(); // 格式化
      //     // document.getElementById("duration").innerText = arrival;
          
      //   } else {
      //     // console.log(status);
      //   }
      // });
  
    
      // 輸入地址按下確認更改位置
      var options = {
        types: ['geocode']
      }
      var input = document.getElementById('address');
      var autocomplete = new google.maps.places.Autocomplete(input, options);
      
      google.maps.event.addListener(autocomplete, 'place_changed', function (){

        // var place = autocomplete.getPlace();
        // var lat = place.geometry.location.lat();
        // var lng = place.geometry.location.lng();
        // mylatlng = { lat: lat, lng: lng }

        document.querySelector('button.btn.textConfirm').addEventListener('click', function(){
        //   document.getElementById('finalAddress').innerText = document.getElementById('address').value
          
          // 路線相關設定
          var request = {
            origin: res,
            destination: document.getElementById('finalAddress').innerText,
            travelMode: 'DRIVING'
          };
          
          
          繪製路線
        directionsService.route(request, function (result, status) {
          if (status == 'OK') {
            // 回傳路線上每個步驟的細節
            directionsDisplay.setDirections(result);
            // 路程時間
            var duration = parseInt(result.routes[0].legs[0].duration.value);
            // 目前時間
            var today = new Date();
            // 轉為毫秒數
            var t_s = today.getTime();
            
            var time = new Date();
            time.setTime(t_s + duration*1000 + 15*60*1000); // 將目前時間與路程時間加總 (加上預設餐點時間15分鐘)
            var arrival = time.getHours() + ":" + time.getMinutes(); // 格式化
            document.getElementById("duration").innerText = arrival;
            
          } else {
            // console.log(status);
          }
        });
        
      })
    })


    
    sessionStorage.setItem('location','index')






  })

// 輸入外送地址
    $(".address_search").on("click", function(){
      var address = $("input.address").val();
      console.log(address);
      if(address==""){
        alert("我還不知道你住哪喔");
      }
      else{
        sessionStorage.setItem("wholeAddress", address);
        sessionStorage.removeItem("zipcode");
        window.location.href="browse.html";

      }
    });

// 透過行政區搜尋該區商家
    $("div.adminArea").on("click", function(){
      let zipcode = $(this).attr("name");
      var area = $(this).text();
      let address = "台灣台北市" + area;
      sessionStorage.setItem("wholeAddress", address);
      sessionStorage.setItem("zipcode", zipcode);
      window.location.href="browse.html";
      // console.log(zipcode);
      // console.log(JSON.stringify(zipcode));
      // var url = "IndexGetByZipcode"
      // fetch((url),{
      //               method: "POST",
      //               headers: {
      //                 "content-Type": "application.json"
      //               },
      //               body: JSON.stringify({
      //                 zip_code: areaResult[0]
      //               })
      //         })
      //           .then(function (response) {
      //             if (response.ok) {	// 接收到回傳的物件
      //               console.log("成功載入登入資料");		// 如果正確取得資料，沒有發生錯誤
      //               return response.json(); // 將取得的資料，再使用 .json() 解析資料
      //             }
      //           })
      //           .then(function(data){
      //               console.log(data);
      //               window.location.href="browse.html";
      //           });
      
    });



  </script>

</html>